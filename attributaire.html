<!DOCTYPE html>
<html lang="en"><!-- Basic -->
<head>
	<meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">   
   
    <!-- Mobile Metas -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
 
     <!-- Site Metas -->
	 <title>Géoportail Touristique du Maroc</title>  
    <meta name="keywords" content="">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Site Icons -->
    <link rel="shortcut icon" href="images/palmicon.png" 
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="css/bootstrap.min.css">    
	<!-- Site CSS -->
    <link rel="stylesheet" href="css/style.css">    
    <!-- Responsive CSS -->
    <link rel="stylesheet" href="css/responsive.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/custom.css">

	<script src="rivers.geojson"></script>

    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>
	<!-- Start header -->
	<header class="top-navbar">
		<nav class="navbar navbar-expand-lg navbar-light bg-light">
			<div class="container">
				<a class="navbar-brand" href="index.html">
					<img src="images/logogeotourisme.png" alt="" />
				</a>
				<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbars-rs-food" aria-controls="navbars-rs-food" aria-expanded="false" aria-label="Toggle navigation">
				  <span class="navbar-toggler-icon"></span>
				</button>
				<div class="collapse navbar-collapse" id="navbars-rs-food">
					<ul class="navbar-nav ml-auto">
						<li class="nav-item"><a class="nav-link" href="index.html">Accueil</a></li>
						<li class="nav-item"><a class="nav-link" href="about.html">Informations</a></li>
						<li class="nav-item dropdown">
							<a class="nav-link dropdown-toggle" href="#" id="dropdown-a" data-toggle="dropdown">Evolution</a>
							<div class="dropdown-menu" aria-labelledby="dropdown-a">
								<a class="dropdown-item" href="blog.html">Tourisme National</a>
								<a class="dropdown-item" href="blog-details.html">Tourisme International</a>
							</div>
						</li>
						<li class="nav-item dropdown">
							<a class="nav-link dropdown-toggle" href="#" id="dropdown-a" data-toggle="dropdown">Zones touristiques</a>
							<div class="dropdown-menu" aria-labelledby="dropdown-a">
								<a class="dropdown-item" href="reservation.html">Monuments historiques</a>
								<a class="dropdown-item" href="stuff.html">Rivières</a>
								<a class="dropdown-item" href="temp.html">Températures</a>
							</div>
						</li>
						<li class="nav-item active dropdown">
							<a class="nav-link dropdown-toggle" href="#" id="dropdown-a" data-toggle="dropdown">Requête</a>
							<div class="dropdown-menu" aria-labelledby="dropdown-a">
								<a class="dropdown-item" href="attributaire.html">Attributaires</a>
								<a class="dropdown-item" href="spatiale.html">Spatiales</a>
							</div>
						</li>
						<li class="nav-item"><a class="nav-link" href="contact.html">Contact</a></li>
					</ul>
				</div>
			</div>
		</nav>
	</header>
	<!-- End header -->
	
	<!-- Start All Pages -->
	<div class="all-page-title page-breadcrumb">
		<div class="container text-center">
			<div class="row">
				<div class="col-lg-12">
					<h1>Requêtes Attributaires</h1>
				</div>
			</div>
		</div>
	</div>
	<!-- End All Pages -->
	<div class="blog-box">
		<div class="container">
			<div class="row">
				<div class="col-lg-12">
					<div class="heading-title text-center">
						<h2>Carte représentant le nombre total de touristes par région durant 2020 :</h2>
						<p>  </p>
							<head>
							  <meta charset="utf-8" />
							  <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
							  <title>Esri Leaflet</title>

							  <!-- Load Leaflet from CDN -->
							  <link
								rel="stylesheet"
								href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
								integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
								crossorigin=""
							  />
							  <script
								src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
								integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
								crossorigin=""
							  ></script>
						  
							  <!-- Load Esri Leaflet from CDN -->
							  <script src="https://unpkg.com/esri-leaflet@3.0.4/dist/esri-leaflet.js"></script>
							  <script src="https://unpkg.com/esri-leaflet-vector@3.0.0/dist/esri-leaflet-vector.js"></script>
						  
							  <style>
								#map {
								  width: 500px;
								  height: 500px;
								  font-family: Arial, Helvetica, sans-serif;
								  font-size: 14px;
								  color: #323232;
								}
							  </style>

						<html>
							</head>
								<body>
									<center>
									<div id='map' ></div>
									</center>

							  <script>
						
								const map = L.map('map').setView([29.638933, -9.665423], 5);
						
								const mbAttr = 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>';
								const mbUrl = 'https://cartodb-basemaps-{s}.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png';
										  
								var grayscale = L.tileLayer(mbUrl, {id: 'mapbox/light-v9', tileSize: 512, zoomOffset: -1, attribution: mbAttr}).addTo(map);
								var streets = L.tileLayer(mbUrl, {id: 'mapbox/streets-v11', tileSize: 512, zoomOffset: -1, attribution: mbAttr}).addTo(map);
						  
						  
						  
								// Create the select dropdown and add to the top-right of the map
								L.Control.QueryControl = L.Control.extend({
								  onAdd: function (map) {
									// Array of query where clauses
									const whereClauses = [
									  "Afficher les régions dont :",
									  "total2020 < 20000",
									  "total2020 < 60000 and total2020 > 20000",
									  "total2020 < 120000 and total2020 > 60000",
									  "total2020 < 400000 and total2020 > 120000",
									  "total2020 < 700000 and total2020 > 400000"
									  
									];
									
									// Create select
									const select = L.DomUtil.create("select", "");
									select.setAttribute("id", "whereClauseSelect");
									select.setAttribute("style", "font-size: 16px;padding:4px 8px;");
									whereClauses.forEach(function (whereClause) {
									  let option = L.DomUtil.create("option");
									  option.innerHTML = whereClause;
									  select.appendChild(option);
									});
									return select;
								  },
						  
								  onRemove: function (map) {
									// Nothing to do here
								  }
								});
						  
								L.control.queryControl = function (opts) {
								  return new L.Control.QueryControl(opts);
								};
						  
								L.control
								  .queryControl({
									position: "topright"
								  })
								  .addTo(map);
						  
								// Add the Feature Layer to the map
								const parcels = L.esri
								  .featureLayer({
									url: "https://services3.arcgis.com/RYJD4BItRgLmP5Zw/arcgis/rest/services/regions1/FeatureServer/0",
									simplifyFactor: 0.5,
									precision: 4,
									where: "1 = 0",
									style: function (feature) {
									  // https://leafletjs.com/reference-1.7.1.html#path-option
									  return {
										opacity: 1.0,
										weight: 0.5,
										color: "#31a354",
										fillColor: "#addd8e",
										fillOpacity: 0.5
									  };
									}
								  })
								  .addTo(map);
						  
								//Setup the Popup
								parcels.bindPopup(function (layer) {
								return L.Util.template("<b>Région : {region}</b>" + " </br> Nombre de touristes: {total2020}", layer.feature.properties);
								});
						  
								// When the selected where clause changes, set the filter on the layer
								const select = document.getElementById("whereClauseSelect");
								select.addEventListener("change", () => {
								  if (select.value !== "") {
									parcels.setWhere(select.value);
								  }
								});
						
							  </script>
							  </html>

	<a href="#" id="back-to-top" title="Back to top" style="display: none;">&uarr;</a>

	<!-- ALL JS FILES -->
	<script src="js/jquery-3.2.1.min.js"></script>
	<script src="js/popper.min.js"></script>
	<script src="js/bootstrap.min.js"></script>
    <!-- ALL PLUGINS -->
	<script src="js/jquery.superslides.min.js"></script>
	<script src="js/images-loded.min.js"></script>
	<script src="js/isotope.min.js"></script>
	<script src="js/baguetteBox.min.js"></script>
	<script src="js/form-validator.min.js"></script>
    <script src="js/contact-form-script.js"></script>
    <script src="js/custom.js"></script>
</body>
</html>